package me.bon.badlionplus.module.Exploit;

import me.bon.badlionplus.module.Category;
import me.bon.badlionplus.module.Module;
import net.minecraft.client.gui.GuiScreen;
import net.minecraft.client.gui.inventory.GuiContainer;
import net.minecraft.inventory.Container;
import net.minecraft.inventory.ContainerChest;
import net.minecraft.inventory.InventoryBasic;

public class EChestBackPack extends Module {
	
	private GuiScreen echestScreen;
	
	public EChestBackPack() {
		super("EChestBackPack", Category.Exploit);
		this.echestScreen = null;
	}
	
	
	@Override
    public void onUpdate() {
        if (this.mc.currentScreen instanceof GuiContainer) {
            final Container container = ((GuiContainer)this.mc.currentScreen).inventorySlots;
            if (container instanceof ContainerChest && ((ContainerChest)container).getLowerChestInventory() instanceof InventoryBasic) {
                final InventoryBasic basic = (InventoryBasic)((ContainerChest)container).getLowerChestInventory();
                if (basic.getName().equalsIgnoreCase("Ender Chest")) {
                    this.echestScreen = this.mc.currentScreen;
                    this.mc.currentScreen = null;

                }
            }
        }
        
    }
    
    @Override
    public void onDisable() {
    	if(this.echestScreen != null && mc.player != null && mc.world != null) {
            this.mc.displayGuiScreen(this.echestScreen);
    	}
    	
    	
        this.echestScreen = null;
    }
	
}
